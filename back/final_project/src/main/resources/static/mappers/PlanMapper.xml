<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.floating.mvc.dao.PlanDao">

	<!-- Plan을 추가한다. -->
	<insert id="insertPlan" parameterType="PlanRequestDto">
		INSERT INTO plan(date, category, detail, time, complete_date, shifted, user_pk)
		VALUES (#{date}, #{category}, #{detail}, #{time}, #{complete_date}, #{shifted}, #{user_pk})
	</insert>

	<!-- Plan 정보 전체를 조회한다. -->
	<select id="selectAll">
		SELECT * FROM plan
		WHERE user_pk = #{userId}
	</select>
	
	<!-- Plan 정보 일부를 조회한다. -->
	<select id="selectPlan" resultType="PlanRequestDto">
		SELECT * FROM plan
		WHERE user_pk = #{userId} AND date = #{date}
	</select>
	
	<!-- Plan 정보를 수정한다. -->
	<update id="updatePlan">
		UPDATE plan
		SET
			date = #{date},
			category = #{category},
			detail = #{detail},
			time = #{time},
			complete_date = #{complete_date},
			shifted = #{shifted}
		WHERE userId = #{userId}
	</update>
</mapper>